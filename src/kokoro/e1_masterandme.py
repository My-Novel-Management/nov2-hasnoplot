# -*- coding: utf-8 -*-
"""Episode: 7-1.先生と私／こころ
"""
## path
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
## local libs
from storybuilder.builder.world import World
from storybuilder.builder.writer import Writer


## define alias
W = Writer
_ = W.getWho()


## scenes
def sc_thinkingnovel(w: World):
    sana, noto = W(w.sana), W(w.noto)
    gero, azu = W(w.gero), W(w.azumino)
    monitor = W(w.monitor)
    return w.scene("長編小説を考える",
            w.comment("先生と約束をしたので長編の構想を練ってみる"),
            sana.be("テーブルにノートパソコンを広げ、その前で正座をして$Sは両手を合わせていた"),
            gero.come("#やってきて"),
            gero.talk("何やっとるがね？"),
            sana.talk("あ……"),
            sana.explain("ノックもせずにドアを開けて目を合わせたのは$geroだった",
                "珍しく顔パックをしているのは明日がデートだからだろう", "デートといっても相手はコミケで知り合った同性らしい"),
            sana.talk("先生と約束しちゃったのよ、$meも長編小説を書くって"),
            gero.talk("ハァ？"),
            gero.do("あんたバカァ？　――とでも続けそうに顔を歪ませて、落ちそうになったパックを慌てて押さえつける"),
            sana.explain("旅先での先生とのやり取りを話すと最初は納得したようにうんうん頷いていたが、",
                "隣に座って右肩に手を置いてから考えが変わったらしく「とは言ってもね」と前置きをしてからこう続けた"),
            gero.talk("流石に原稿用紙二百五十枚はやり過ぎだわ",
                "残業もええとこで、ほなもん、特別手当つけてもろてもかなわんよ？"),
            sana.talk("$meもそうだとは思うんだけどさ、でももう来月締切なのよ",
                "そこがデッドライン。本来ならそろそろ初稿上げてもらって校正作業に入りたいところなんだけど、",
                "書きかけだった話は気乗りしないとか小説じゃないとか言われてゴミ箱だし"),
            gero.talk("そういうの$sanaの悪い癖だがね",
                "いっつも安請け合いしては自分で抱えきらんで、頭ぱーんてなって、助けてーって言わなあかんのよ"),
            sana.talk("分かってるけどさ……でも、十年ぶりに小説書く気になった先生のこと、応援してあげたいじゃない？"),
            gero.talk("ボランティアで？"),
            sana.talk("それを言われると辛い"),
            _.think("仕事の範疇を超えている、ということは$S自身も分かっている",
                "けれど作家が作品を書く為に何ができるのかを考えた時、それを相手が求めるのなら、やはり応えるのが編集の義務なんじゃないだろうか"),
            gero.talk("ああ、それよりさ、ちょっといい？"),
            gero.do("$geroはマウスを奪ってブラウザを立ち上げると、$on_hercompanyのホームページを開く"),
            monitor.look("画面には漫画やアニメ、小説の表紙画像がこれでもかと貼り付けられたが、", "&"),
            gero.do("彼女はその中の『$w_alicecontest1』のバナーをクリックした",
                "すぐに切り替わり、そこには作家と作品名のリストがずらりと表示される"),
            sana.talk("え？", "これって一次選考結果？"),
            sana.think("$nirasakiの話では明日の十時に公開設定にしてあるはずだが、聞き間違いだったのだろうか"),
            gero.talk("あー"),
            sana.talk("どうしたの？"),
            gero.talk("うん。ないわ"),
            sana.think("落胆して見えたその表情の意味を思い出すより先に、玄関の方でドアの開閉音がした"),
            azu.come("#バイトから戻ってきて"),
            azu.talk("ただいまー", "バレンタイン前は流石にお客さん多かったー"),
            gero.talk("お、おつかれさーん"),
            sana.do("$geroはマウスを放り出し、先にリビングに出て行ったが、ドアが閉まる前に小さく首を振り、$Sに何かを伝えようとした","&"),
            _.think("一瞬意味が分からなかったが、リビングで繰り広げられる$geroと$azuの何気ないやり取りを聞いているうちに、$azuがこの新人賞に応募したと言っていたことを思い出し、","&"),
            _.do("慌ててその画面を閉じて部屋を出た"),
            azu.talk("ああ、$sana。ただいま"),
            sana.talk("う、うん。おつかれ"),
            azu.have("#彼女の手にはケーキの箱"),
            sana.explain("型崩れしたものを貰ってきたというチョコケーキがテーブルの上に置いてあり、$geroはさっさとキッチンから取皿とフォークを持ってやってきて、自分の分だけ取り置いて座る"),
            sana.talk("早い"),
            gero.talk("絵師は喰わねばやっていけぬ"),
            azu.talk("じゃあお茶入れてくるね"),
            sana.talk("いいのよ$azu", "疲れてるんだからそれくらい$meが"),
            azu.talk("大丈夫大丈夫", "なんかね、調子いいんだ"),
            azu.go("珍しく笑顔を浮かべ、キッチンに行ってしまった"),
            sana.think("彼女が忘れていなければ明日には自分でホームページを確認する",
                    "それを考えただけでしばらくどういう顔で過ごそうかと、気が重くなる"),
            gero.talk("ま、この先何度も体験することだがね"),
            sana.talk("そうかも知れないけど……"),
            sana.think("初めて書き上げた長編だと、投函する前の夜には興奮気味に語っていた彼女を思い出し、", "今日だけは明日が来ないでくれと心の中で願ってしまう"),
            azu.come(),
            azu.talk("二人ともミルクティーで良かった？"),
            gero.talk("おう"),
            sana.talk("う、うん"),
            azu.do("それから一分と経たずに$CSたち三人の、チョコケーキと紅茶を迎えての小さなお茶会が始まった", "&"),
            sana.explain("話題は仕事の愚痴から始まり、好きな男性キャラクターの話や昔のアニメ、漫画、それに結婚相手はどんな人がいいかなど、",
                    "わざとそうした訳ではないが、小説からはやや遠い話題を中心に、それでも二時間ほど、笑顔の絶えない時間を過ごした"),
            _.explain("だからこそ、翌朝、あんなことが起こるなんて想像もできなかったのだ"),
            ## NOTE
            ##  安曇野が選考に落選したことが判明したのは一月末。一次の発表があった
            ##  落ち込んでいるところに、更に別のものの一次の発表もあり、悩んでいる
            camera=w.sana,
            area=w.Tokyo,
            stage=w.on_herhouse_int,
            day=w.in_thinknovel, time=w.at_night,
            )

def sc_resultannounce(w: World):
    sana, noto = W(w.sana), W(w.noto)
    gero, azu = W(w.gero), W(w.azumino)
    return w.scene("結果発表",
            sana.be(),
            gero.be(),
            azu.be(),
            sana.talk("お、はよ？"),
            sana.do("珍しく自分が一番早起きだったのだろうかと、人気のないリビングに顔を出して$Sは思った"),
            sana.talk("え……"),
            sana.think("けれどガン、という何かが壁に叩きつけられた音で、自分以外にも起きている人間がいることが分かった",
                "それも音がしたのは$geroではなく$azuの部屋からだ"),
            sana.do("ドアの前に立ち、ノックをしようと右手を上げたが、声を掛けていいものかどうか一瞬迷ってしまう", "&"),
            _.think("滅多に怒鳴ったり何かに当たったりはしない", "少なくとも一年ばかりシェアハウスしてきて一度もそんな場面には遭遇していない",
                "だからこそ、今このドア一枚隔てた向こう側で彼女がどんな気持ちなのかを考えると、そっとしておいた方がいいんじゃないか、という気も芽生える"),
            sana.talk("$azu？"),
            _.do("それでも$Sはノックをし、声を掛けた",
                "知っていて見過ごすのは、友人としてどうなのか、とも思えたからだ"),
            azu.talk("ねえ、$meさ、大丈夫だって、思ってたんだ"),
            sana.talk("うん"),
            azu.talk("けど、全然そんなことなかった",
                "今ね、心の中に百くらいなんで？　が浮かんでるの",
                "どうして、でも、何故でもなくて、なんで？　って"),
            sana.do("$Sはドアを開けることを諦め、背をつけて、ただ彼女の話に相槌を返すことを選んだ"),
            azu.talk("ねえなんでかな？",
                "$sanaだったら分かるの？", "$meの落選理由",
                "もし知ってるなら、教えて",
                "今の自分の精一杯が全然駄目って言われてるの",
                "ねえ、どこが駄目だったの？", "何が駄目だったの？",
                "それとも全然小説してなかったのかな？",
                "単なる趣味の延長でしか、なかったのかな？", "あの必死だった三ヶ月が"),
            sana.think("落選理由は知っていた",
                "当然だ",
                "彼女の作品の下読みを担当したのは$Sだからだ",
                "けれど今回は最終選考に残った作者にのみ選評を付けることになっている",
                "だからいくら知人だからといって落選理由について語ることはできない",
                "そもそも誰が評価を担当したか、そういったことは社外秘なのだ"),
            azu.talk("ねえ……ねえってば！"),
            sana.hear("ドアが激しく叩かれた"),
            sana.think("それはそのまま$S自身の背を叩いているみたいで、痛みはなくても心が痛む",
                "けど、それでも言うことはできない"),
            sana.talk("結果、見たんだ？", "残念だったね",
                "でも千近くの応募数で一割通らないんだからさ、駄目だったら次、くらいに考えないと", "ね？"),
            azu.talk("でもその一次を抜けた人と$meの作品には明確な差があった訳でしょ？",
                "駄目なら駄目で理由を知りたい", "どれくらい駄目で、どれくらい駄目じゃなかったのか？",
                "$meのあの作品が駄目だった、なんで？　を知りたいの！"),
            sana.talk("分かってると思うけど、選考については一切答えられない",
                "それは友人である$azuだって同じだよ",
                "特別扱いはしないし、もし一次を通ったってあれは二次は絶対に無理だから"),
            azu.talk("え？"),
            sana.think("しまった――と思った時にはもう手遅れだった"),
            azu.talk("読んだのね",
                "何？", "じゃあ既にあれが落選してたことは知ってたの？",
                "そっか、そうだよね", "どうせもう最終選考くらいまで進んでるんでしょ？",
                "編集部でどれがいいかって話もしてるわよね",
                "じゃあ聞かせてよ？",
                "$meの作品を読んだ編集の人がどう言ってたのか",
                "あの作品がどうして二次は絶対に無理なのかを！"),
            sana.do("$azuの言葉は止まらなかった"),
            azu.talk("分かってるよ？",
                "ほんとはあんなの全然小説になんかなってないって",
                "設定だって凡庸だし、キャラだって個性ないし、ストーリー展開だって王道そのものだし、何より文章が読んでて面白くなんかないのよ！"),
            sana.talk("$azu……"),
            azu.talk("でも駄目な部分も未熟な部分も、自分では分からないような稚拙さだって、みんな持ってるじゃない！",
                "$meだけじゃない！",
                "素人だけじゃない！",
                "プロとしてデビューして書いている人たちだって、何これ？　って思う部分、いっぱいあるもの",
                "これなら$meの方がマシだって思う作品、読んできたもの！",
                "なのになんで？",
                "なんで今回$meの作品は落ちたの？",
                "$sana言ってくれたよね？",
                "一次は通るって",
                "あれ、適当なお世辞？"),
            sana.talk("違うよ$azu！",
                    "普段$azuが書いてる作品を読んでいる$me個人の意見だよ？",
                    "充分一次選考突破レベルはある",
                    "ただね"),
            sana.do("ドアの向こうが一瞬静まり返った"),
            azu.talk("ただ？"),
            sana.talk("うちのカラーじゃない",
                    "もっと言えばライトノベルの作品じゃない……って"),
            sana.hear("鍵をロックする音が響いた"),
            sana.talk("$azu？", "ねえ、だから落ち込むことじゃないの",
                    "ちゃんと反省点を見つけて修正していけばいいだけだから、ねえ……$azu……"),
            sana.do("もう彼女の声は聞こえなかった",
                    "ドアに耳を澄ましても、物音は分からない"),
            gero.talk("どしたー？"),
            sana.talk("ああ、$gero", "それがね……"),
            sana.do("事情を説明すると$geroは首を横に振り、肩に手を置いてこう言った"),
            gero.talk("今は誰が何を言ったって無駄だがね",
                    "それより朝ご飯、何か買ってくる？"),
            sana.do("苦笑した彼女に$Sも力なく頷いた"),
            sana.explain("その日、$full_azuminoは一度も$Sと顔を合わさなかった",
                "$geroによるとトイレや飲み物を取るのに出てきた以外はほとんど自室に篭ったままで、アルバイトも休み、時折壁を殴る音が聞こえていたという"),
            w.eventPoint("安曇野の落胆", "どこか空元気"),
            )

## episode
def ep_master_and_me(w: World):
    return w.episode("1.上　私と友人",
            ## NOTE
            sc_thinkingnovel(w),
            sc_resultannounce(w),
            )
