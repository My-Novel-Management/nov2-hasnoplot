# -*- coding: utf-8 -*-
"""Episode: 4-4.柘榴／檸檬
"""
## path
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
## local libs
from storybuilder.builder.world import World
from storybuilder.builder.writer import Writer


## define alias
W = Writer
_ = W.getWho()


## scenes


def sc_meeting_after(w: World):
    sana, noto = W(w.sana), W(w.noto)
    nira, king, yone = W(w.nirasaki), W(w.king), W(w.yonezawa)
    return w.scene("会議（決定編）",
            sana.be(),
            nira.be(),
            king.be(),
            yone.be(),
            sana.explain("四人の手元にはそれぞれ原稿をコピーしたものがあった", "&"),
            sana.explain("タイトルは『$master_shortnovel1』とあり、それは先生から事前に聞いていた王道ファンタジィ作品でも文芸作品でもなく、",
                "時代劇ファンタジィだった"),
            sana.think("確かに最後まで異世界ものを書くことは渋っていたし、かといって今までずっと現代や昭和期の日本を舞台とした文芸作品しか書いてこなかった先生にとって、",
                "よくある西洋風な世界観のファンタジィ作品を書くというのも冒険だろう",
                "けれどまさか最近流行の兆しのある和風ファンタジィを書いてくるとは$Sも予想していなかった"),
            king.talk("いやあ、びっくりしたね。しかし、何だ", "今までうちで扱ったことがあるタイプの作品ではないものの、流石の筆力に思わず唸ったよ"),
            sana.do("編集長が珍しく作品を褒めていた",
                "元々は文芸畑を歩いてきたと$fukayaからは聞いている",
                "その為か、この文二の扱うライトノベルというものをどこかで見下している節があった",
                "明言こそしないがその言葉の端々には「数字さえ出せば内容はどうでもいい」という態度が滲み出ている","&"),
            sana.think("ライトノベルにはライトノベルの良さがあり、求められる資質というものがあると$Sは考えているが、",
                "とりあえずエロいイラスト付けておけばある程度数字が出るという考えではそれぞれの作家が可哀想だ"),
            nira.do("$nirasakiは黙ったまま、時々$CSの方を見ては様子を伺っている"),
            yone.talk("つまり編集長はこの作品を面白いと、そう仰るのですね？"),
            sana.do("$yonezawaが冷静な口調で尋ねると、編集長は「まあ、そうだが」とやや引っかかる言い方で答えた"),
            yone.talk("では$nirasaki君はどう感じたか、聞かせてもらえないか"),
            nira.talk("和風ファンタジィ、それも主人公は不死の少女剣士だ",
                "これに良いイラストなんか載っければそれだけで強烈な引きになるとは思いますよ",
                "ただ流石に文章がラノベっぽくはない",
                "これじゃあ文芸レーベルで出した方がいいくらいだ",
                "大手の$w_dengekiとかなら硬派な作風のものも混ざってても大丈夫でしょうけど、うちがこれまで出してきたのはおっぱいぷるーん、魔法ずどーん、みたいな単純に楽しめるものばかりですよね？",
                "いきなりこれを、短編特集の一作とはいえ、読まされたうちの読者は何て思うでしょうね"),
            sana.think("彼の言うのも編集としてはよく理解できる",
                "実際$Sも作品そのものは興味深く読んだけれど、これをライトノベルとして見た時に一体どういう反応をされるだろうかと不安になった",
                "しかし$yonezawaの意見は違っていた"),
            yone.talk("これ、$meは面白いと思いますよ",
                "短編シリーズの第一作にしても良い",
                "確かにこれまでうちで出してきたどの作品ともタイプは違っていますが、そういう狭い見方ではなく、ライトノベル全体として見た時にはこういった作風のものも幾つも出ていますし、",
                "それなりに支持を得ています",
                "何より今、漫画とアニメになりますが、あの$w_onepeaceの売上を抜いたと話題の$w_kimetsuなんか和風ファンタジィじゃないですか",
                "$w_touloveからの和モノの流れが来ていることも鑑みれば、今後うちから売り出していく新しい流れを生み出してくれるかも知れません"),
            sana.do("眼鏡を外し、弁に熱を入れて話す$yonezawaを、$Sは今までに一度しか見たことがなかった",
                "それだけ彼のお気に入りになったということだ"),
            nira.talk("でもさ、他の短編作品たちとあまりにも色が違い過ぎて、逆に浮いちゃうんじゃないですか？",
                "なんか幕の内に一個だけマカロンが入ってるみたいな違和感"),
            king.talk("そう言われると、まあ、一作だけ他と出来が違い過ぎるのは確かだが"),
            yone.talk("つまり編集長と$nirasaki君は掲載には積極的ではないと、こういう訳ですね？"),
            sana.do("$yonezawaの問いかけに曖昧だが二人とも頷きを返す"),
            yone.talk("では$ln_sanaさん",
                "君は先生の担当です", "その担当としてこの作品は雑誌掲載すべきだと、そう考えますか？"),
            sana.think("ここで当てるのか、とやや胃の痛みを感じつつ、$Sは「そうですね」と前置きをして考えを言葉に変えていく"),
            sana.talk("$me自身の考えは、どちらかといえば$nirasakiさんや編集長に近いです"),
            nira.talk("なら"),
            sana.talk("待ってください、$nirasakiさん",
                "近いだけで同じじゃないです",
                "確かに$hermagazine1に掲載する作品としては異色と言っていいでしょうし、うちのカラーというものを考えた時に男性読者が支持層であるということからもどれくらい本作が評価されるのかは未知数です",
                "でもですね、ここでちょっと思い出してもらいたいんです", "この短編競作企画の趣旨を"),
            yone.do("$Sの言葉に、$yonezawaは眼鏡を少し持ち上げて口元に笑みを作る"),
            w.comment("小説文芸誌の売上で見れば約１万部から下は６千部といったところ"),
            w.comment("ドラゴンマガジンは２０１２年度で３万部はあった"),
            king.talk("売上も頭打ち、いやそれどころか緩やかに減少傾向であり、前回は一万部を遂に切った",
                    "そこで今回は現状維持ではなく将来を見越して多少売上が落ちようと、新鮮な感動を生み出そうというのが、$yonezawaの書いてきた企画の一番上に書かれていたこれだ"),
            sana.do("編集長がテーブルに置いた資料を指で叩いた",
                    "$Sも今一度その文言に目を通して、気を引き締める"),
            yone.voice("｜挑戦《チャレンジ》"),
            sana.do("実にシンプルな文字だけれど、それこそが今、$Sが求めている答えだった"),
            sana.talk("そうですよ、これです！",
                    "今まで通り、自分たちのカラーを守っていくだけなら、何も文芸畑の$noto先生を引っ張ってこなくたって良かったんです",
                    "今回先生にわざわざ作品を書き下ろしてもらったのは先生にとっても挑戦ですけれど、$meたちにとっても大きな挑戦なんです",
                    "だから今までと違うとか、うちの読者は受け入れてくれないとか、そういう言葉で一度握った拳を引っ込めることはないんですよ",
                    "$meは、本作こそが、今回の短編競作の顔となる作品だと、自信を持って推薦します！"),
            sana.do("最後は声が上擦っていた"),
            _.do("けれどそれに対して三人の誰も反論の声を上げず、$yonezawaなんかは小さく頷いてくれた"),
            king.talk("それで終わりか？"),
            sana.talk("え？"),
            king.talk("$meはな、$ln_sana", "常々情熱や精神論で語るな、数字で語れと言ってきた",
                    "この短編競作の企画意図はお前が言った通りかもしれんが、挑戦なんて体の良い言葉で押し通せるならどんなヘボな企画だって通っちまうだろ？",
                    "ビジネスは結果が全てだ",
                    "お前の気持ちはよく分かった",
                    "分かったからこそ、この作品が必要だと、今まで本誌で書いてもらった先生たちを押しのけてまでも企画の顔とする、それだけの結果を望めると証明してくれよ？"),
            sana.think("そんなことは無理だ、というのは編集長も分かっているのだろう",
                    "けれど今更引けないのだ",
                    "自分のツテで今大人気のラノベ作家の一人とのコネを掴めそうなところまできた",
                    "そのチャンスを逃したくないのだ"),
            _.think("しかしその気持ちは$Sも同じだった",
                    "何としてでも先生の作品掲載を勝ち取らなければいけない"),
            sana.talk("証明、になるかどうかは分かりませんけど……"),
            sana.do("そう前置きして、$Sは自分のスマートフォンを取り出す",
                    "画面にあるサイトを表示し、それを編集長に見せた"),
            king.talk("これは……お前の個人的な$twitterか？"),
            sana.talk("そうです"),
            sana.do("そこには『$full_notoの新作短編ライトノベルを$hermagazine1で読みたいか？』というアンケートが取られており、",
                    "はい／いいえ／わからないの三択の数字がパーセントと票数で表示されている"),
            king.talk("まだ短編競作の作家陣は公式には未発表だということを、お前は理解しているのか？"),
            sana.talk("はい。分かっていて、それでもやりました"),
            king.talk("じゃあこんな数字はノーカウントだ！", "編集員が無断で情報漏洩するとか、うちのコンプラはどうなってるんだ！"),
            sana.talk("始末書はあとで書きます",
                    "しかし今はこの数字を見て下さい！"),
            sana.do("はいが七十パーセント強あり、全体でも票数は一万を超えている"),
            sana.talk("これだけ多くの人が期待をして先生の新作を待ってくれています",
                    "それに応えるのは$meたちの使命なんじゃないですか？"),
            nira.do("一瞬静まり返った場で、$Sの含み笑いが響く"),
            king.talk("何がおかしいんだ、$nirasaki"),
            nira.talk("いや、", "短編の一枠くらいいいじゃないかって思って"),
            king.talk("何だと？"),
            nira.talk("評判良ければ次があるし、悪ければどんな大先生様だって終わりでいいじゃないですか",
                    "その為の雑誌でしょ、元々？"),
            sana.think("何だろう", "味方をしてくれているのだろうか",
                    "$Sは彼の考えがよく読めなかったが、スマートフォンを弄りながら更に言う"),
            nira.talk("もういいじゃないですか、編集長", "どうせまだ$nomioの原稿なんてないんでしょ？",
                    "次号で短編でも連載小説でも何でもいいから載せるっていう方向で調整すればいいでしょ",
                    "ねえ、$yoneさん"),
            yone.talk("その方がこちらとしても対応がしやすいですし、スケジュール上の問題も発生しないので助かりますね",
                    "どうでしょう、編集長", "従来の予定通り、$noto先生の作品で一月号はいきませんか？"),
            king.do("編集長は腕組みをしてしばらく唸っていたが、観念したように溜息をつくと「ああ、わかったよ」と承諾の言葉を口にした"),
            camera=w.sana,
            stage=w.on_meetingroom_int,
            day=w.in_meetingshortnovel,
            time=w.at_afternoon.elapsedMin(30),
            )

def sc_formallyeditor(w: World):
    sana, noto = W(w.sana), W(w.noto)
    return w.scene("正式に担当に",
            sana.come("その一時間後、急ぎの仕事を片付けたその足で$Sは急いで先生のアパートへとやってきた"),
            sana.talk("先生！"),
            noto.talk("全く騒がしいね", "一体何事かね？"),
            sana.talk("決まったんですよ！"),
            noto.talk("そうか", "それは良かった"),
            noto.do("よかった、と答えた割に先生の表情は特に嬉しそうでもない"),
            sana.talk("先生嬉しくないんですか？　それとも笑顔をどこかに置き忘れたんですか？"),
            noto.do("その言葉に、先生は思い切り吹き出した"),
            noto.talk("笑顔が落とし物センターに大量に届けられている様を思い浮かべてしまったよ"),
            sana.talk("だって先生、十年ぶりの新作なんですよね？", "それが世間に出ることが決まったのに、全然なんですもん"),
            noto.talk("嬉しくない訳ではないよ。寧ろ、嬉しい",
                "けれどね、その陰で割を食った誰かがいた訳だろう？", "&"),
            _.talk("作家は常に誰かの犠牲の上に立って作品を発表している。そういう自覚は持っておくものだと、$meは思っているんだ",
                "だからこそ半端なものは出せないし、書けない", "そう思わないかい？"),
            sana.think("自分の書いたものがどうだったのか、と問われている気がして、素直に「はい」とは口にできなかった"),
            noto.talk("ああ、それから、君の小説ね",
                "あれ、赤入れておいたから",
                "あとで読み返して修正しておくように"),
            sana.talk("え！？"),
            sana.do("先生は$Sに茶封筒を渡し、確認するように頷いた",
                "中を見てみると、確かに大量に赤が入れられた自分の短編小説のゲラで、書き上げたらそれで終わりじゃない、という作家側の気持ちが少し理解できた"),
            sana.talk("分かりました", "ちゃんと書き直してお持ちしますよ",
                "それより先生、コーヒー淹れますか？"),
            noto.talk("ああ、頼むよ", "担当の君が淹れたものの方がどういう訳か旨いんだ"),
            sana.think("担当、という言葉をはっきりと聞いて、$Sは小躍りしそうな足取りでキッチンへと向かった"),
            sana.think("担当……先生の、正式な担当かあ"),
            sana.explain("しかしこれが$Sの編集人生の苦労の、まだほんの序章に過ぎないとは、この時彼女は知る由もなかったのである"),
            stage=w.on_hisapart,
            time=w.at_evening,
            )

## episode
def ep_pomegranate(w: World):
    return w.episode("4.柘榴",
            ## NOTE
            sc_meeting_after(w),
            sc_formallyeditor(w),
            )
