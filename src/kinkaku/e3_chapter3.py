# -*- coding: utf-8 -*-
"""Episode: 8-3.第三章／金閣寺
"""
## path
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
## local libs
from storybuilder.builder.world import World
from storybuilder.builder.writer import Writer


## define alias
W = Writer
_ = W.getWho()


## scenes
def sc_stalker(w: World):
    sana, noto = W(w.sana), W(w.noto)
    nose = W(w.nose)
    inside, outside = W(w.inside), W(w.outside)
    return w.scene("ストーカー被害",
            w.comment("最近何か妙なことが起こると思っていたら、ストーカーされていた"),
            sana.come("#会社からの帰り道を歩いている"),
            sana.explain("二月もあと二日で終わる。会社の方は決算に向けて色々と忙しなさが加速していた",
                "ただ$Sにとっては現状、とにかく$notoの長編小説の原稿が締め切りまでに無事仕上がるようサポートすることが仕事の関心の大半を占めていて、",
                "四月に発表を控えている社主催の新人賞の件や来月から担当する作家が増えること等の雑事は頭の中でも随分と片隅の方に追いやられてしまっていた"),
            sana.do("駅を出て、人通りの多い歩道を帰る"),
            sana.think("最近どうも誰かに尾行されているんじゃないか、と感じることが増えた",
                "自意識過剰だと$nirasakiには言われたがそれでも東京に出てきた頃に何度も痴漢被害に遭った身で、",
                "気にしなくていいと言われてもそれなりに注意せざるを得ない"),
            sana.think("――ちょっとだけ、確かめてみるかな"),
            sana.do("途中でコンビニに入り、怪しげな人物がいないかと探りを入れる"),
            outside.look("外は既に暗く、通りを過ぎ去る車のヘッドライトが人の流れを照らしていく", "&"),
            sana.think("特に立ち止まったり、誰かを探す素振りをしていたり、妙な行動を取っている人物は見当たらない",
                "そう", "きっと自分の気の所為だ", "残業が多くて疲れが溜まっていたのだ、と思い、","&"),
            sana.do("温かいカフェオレとメープルシロップのパンを買ってコンビニを後にする"),
            w.eventPoint("沙奈のストーカー", "つけられている？"),
            ## NOTE
            ##  ストーカーを思わせて、野迫川を登場させる
            camera=w.sana,
            stage=w.on_street,
            day=w.in_stalking, time=w.at_night,
            )

def sc_intimidation(w: World):
    sana, noto = W(w.sana), W(w.noto)
    nose = W(w.nose)
    inside, outside, road = W(w.inside), W(w.outside), W(w.road)
    return w.scene("脅迫",
            sana.come("#アパートまでの狭く暗い路地を歩く"),
            sana.think("もうすぐでマンションに着く、という心地で角を曲がる", "&"),
            road.look("街灯の一つが切れ掛かり、その明滅が$Sの小さな影をアスファルトに映したり消したりしている"),
            sana.hear("遠くで聞こえるパトカーのサイレンもいつものこととはいえ、","&"),
            _.think("こんな時ばかりはあまり耳に入れたくない"),
            sana.talk("二人ともバイトか……"),
            sana.do("$lineのグループには「お留守番よろしく」と「ごめんね」という二人のメッセージが残っていた", "&"),
            _.think("$Sは残業で遅くなる日も多いので大抵どちらかが「おかえり」を言ってくれるのだけれど、時々こういう日もある",
                "そう、ただそれだけのことだ"),
            sana.do("ふと立ち止まり、後ろを見やった",
                "自転車ではない", "自分以外の足音が聞こえた気がしたのだ"),
            sana.think("誰もいない", "うん、大丈夫"),
            sana.do("そう思った刹那、スマートフォンが鳴った", "$lineだ。それも知らない誰かから"),
            nose.voice("きっと気の所為だ、と思いながら$full_sanaは後ろを振り返る",
                "人影の一つも見つけられなかったことにほっと胸を撫で下ろした刹那、携帯が鳴った"),
            sana.think("何、これ……"),
            sana.think("それはまるで自分が書いたような文章で、それも今の$Sの状況を描き出している",
                "誰かが確実に、自分を見ているのだ"),
            sana.talk("誰？"),
            sana.do("小さく声に出す", "当然返事なんてなく、それでもどこかで自分を見ているのは分かった",
                "そういう動物的直感は優れているのだ"),
            sana.talk("ひょっとして、$noseさんですか？"),
            sana.do("それに声で答えるよりも男は、電柱の陰から幽霊のように姿を見せると、被っていたフードを少しだけ上げてそのギラついた目を歪ませた"),
            noto.talk("へえ、知ってたのか",
                "あの人から何か聞いたか", "まあいい",
                "もうあんたの家すぐそこだろ？　お茶くらい出してくれや", "ゆっくり話したいことがあるんだよ、あの人の盗作についてな"),
            w.eventPoint("先生の盗作騒動", "$noseが盗作について話すと提案する"),
            )

def sc_manstalk(w: World):
    sana, noto = W(w.sana), W(w.noto)
    nira = W(w.nirasaki)
    nose = W(w.nose)
    return w.scene("男の話",
            w.comment("ここで$noseの気持ち悪さと切実さを表現しておく。暴力には訴えない"),
            w.comment("$noseの先生への執拗な執着心や異常性を見せること"),
            nose.be("部屋に上がり込んだ$noseは穴の空いた真っ黒な靴下で胡座をかき、テーブルに肩肘ついて$CSを見ている", "&"),
            nose.look("その表情は擬人化されたガマガエルのようにも思えて、見られているだけで背筋を舐められたような悪寒が走った"),
            sana.be(),
            nose.talk("今日はお友達はいないんだな"),
            sana.talk("すぐ帰ってきます"),
            sana.do("そう言い放って相手を牽制した", "$Sはすぐに逃げ出せるよう玄関の近くに位置取りし、腕組みをしながら猫背の$noseを睨みつける"),
            sana.talk("それよりあなたなんですか？", "ここのところの妙な投書や編集部へのメール、それにあの脅迫状も"),
            nose.talk("あの人の本を出さないと約束しないお前らが悪い"),
            w.eventEnd("沙奈のストーカー"),
            sana.think("その発言はストーカーや脅迫行為を認めたも同然だった"),
            sana.talk("何故そこまで先生の出版停止に拘るんですか？", "そもそも先生は盗作なんて"),
            nose.do("盗作、という言葉が出た瞬間に$noseは机を右拳で叩きつける"),
            nose.talk("な、それよりお茶くらい出してくれや？", "あんた編集だろ？",
                "だったら作家には優しくしとくもんだぜ",
                "できれば酒がいいが、まあコーヒーくらいで我慢してやるよ"),
            sana.do("分かりました、と抑揚なく答えてキッチンに向かう"),
            sana.think("こういう時のために利尿剤とか睡眠薬とか常備しておけば良かったな、",
                "と邪なことを考えつつコーヒーメーカーにお湯と粉をセットした", "&"),
            sana.hear("リビングでは$tvの音が聞こえ、お笑い番組だろうか、下世話な笑い声が流れ始める"),
            nose.talk("あんたはあの人に付いて何年だ？"),
            sana.talk("まだ半年です"),
            nose.talk("$meは一年半、びっちりあの人から小説の基礎を教わった",
                "いや、それは$meにとって美学や哲学そのものだった"),
            nose.do("$tvの音が少し小さくなり、$Sは$CSの相槌を待たずに話を続ける"),
            nose.talk("ラノベの編集じゃ小説のことなんて何も分からんだろうが、",
                "それでも多少あの人から教わってるんだろ？",
                "じゃあ聞かせてくれよ",
                "あんたにとって｜小説《・・》ってのは何だ？"),
            sana.think("言葉こそ荒っぽいがその質問に、先生と初めて会った日のことを思い出した",
                "あの時自分はなんと答えたろうか",
                "そして今なら何と答えられるだろうか"),
            sana.talk("それを答えたら、先生と盗作の関係について教えてくれますか？"),
            sana.do("コーヒーが抽出され、茶色い液体がサーバーに落とされていく"),
            nose.talk("ああ、いいぜ", "そもそもその為にあんたに会いに来たんだからな"),
            sana.do("コーヒーメーカーがズリズリと音を立てて最後の抽出を終えると、来客用のカップではなく紙コップにそれを注ぎ、",
                "一つだけ持ってリビングに戻った"),
            sana.talk("どうぞ"),
            sana.do("$Sが紙コップを置くと、", "&"),
            nose.do("$noseはじっと$Sの表情を伺いながらそれを手に取り、一口だけ飲んだ"),
            nose.talk("で？", "どうなんだ？", "あんたにとっての小説、いや、編集にとって小説ってのは何だ？"),
            sana.talk("大事な商品です"),
            nose.do("その答えに$Sは思い切り吹き出して笑い声を上げた"),
            nose.talk("なんだよそりゃ",
                "あの人に半年もついててそんな答え方しかできないのか？"),
            sana.talk("$meたち、いえ、$meには小説は書けませんし、書くべきではないと思っています",
                "小説を書くのは作家の先生方のお仕事で、作品に対して死ぬような苦労をされて書かれたのか、それとも片手間に書かれたのか、",
                "そんなことは分からないし、寧ろどれだけ頑張ったかは関係ないと思っています"),
            nose.look("$Sは何か言おうとしていたが、$CSの真剣な様子に黙って続きに耳を傾ける"),
            sana.talk("そもそも作品の良し悪しは読者のみなさんが決めることです", "一人一人が思い思いの感想を抱くのが当たり前なんです",
                    "編集はその読者と作品を繋げるのが仕事です",
                    "だから$meたちにとって小説は大事な商品です",
                    "その小説がどんな作品か、どんな風に面白いのか、どんな風に心を動かすのか、どんな人たちに読んでもらいたいのか、",
                    "そんな色々を考えて一人でも多くのその作品を待っている読者へと届けるのが、$meの、いえ、編集の使命なんです"),
            sana.think("それは$Sがこの半年ばかり先生との付き合いの中で辿り着いた、今の心境だった",
                    "初めて先生の生原稿に触れた時、この人の作品は絶対世に出さなければいけないという使命感が生まれた",
                    "$fukaya先輩から何度か聞いたことがあったけれど、編集として一番大事な情熱の魂がそこにはあったのだ",
                    "だからこそ、先生の本を出版停止に追い込もうとしている目の前の男とは対峙しなければならない"),
            sana.talk("どうして先生の邪魔をするんですか？", "嫉妬ですか？", "それともご自分が盗作作家として二度とこの世界で生きていけなくなったから、その当てつけですか！"),
            nose.talk("何をぺえぺえの編集如きが知ったかしてんだよ！"),
            nose.do("テーブルを叩き、$noseは立ち上がる",
                    "猫背だからそうは見えなかったが、目の前まで寄られると$CSを見下ろせるくらいには背丈があった"),
            sana.talk("な、何ですか"),
            nose.talk("作家にとって小説は命より大事なもんだ",
                    "確かに$meは盗作をした", "もう$full_noseは作家としては死んだ",
                    "けどな、盗作をしてるのは何も$meだけじゃねえ",
                    "多くの作家が何かしら他の作家や作品から盗用してる",
                    "ただそれがバレてないだけで、分かる奴が見たらそこら中、どこかで見た話、どこかで見た設定、どこかで見た文章、そんなもんばかりなんだよ！"),
            nose.look("声を荒げた$noseの目には、何故か涙が滲んでいた"),
            nose.talk("$meはあの人から『今ある大半の小説は誰かから、あるいはどこかからの借り物ばかりだ』と教わった",
                    "完全なオリジナルなんてほぼ存在しない",
                    "みんな人生のどこかで出会った何か、それは小説とは限らない",
                    "映画や舞台や漫画やもっと別の、それこそゲームだったり、誰かの日記だったり、知らない人間の会話かも知れない",
                    "そういう作家が経験、体験した誰かの物語をベースとして、そこに自分自身の魂を削って上乗せするものだと、そう教わったんだ"),
            sana.talk("ゼロからは創れない……"),
            nose.talk("ああ、そうだよ",
                    "だからあの人は$meにまず沢山の作品を読むよう教えた",
                    "それから良い部分は盗みなさいと言った",
                    "$meはな、何故か盗むのだけは上手かったんだ",
                    "そもそも$meの業界での闇名を知ってるか？",
                    "ノベルイーターだよ",
                    "他人の小説を喰らってそいつそっくりな文章、作風で別作品を書き上げる",
                    "デビュー当時から界隈じゃ言われてたんだよ、あいつ盗作してるんじゃねえかって"),
            noto.voice("彼はノベルイーターなんだ"),
            sana.think("そう言っていた先生の言葉の意味を、今知った"),
            nose.talk("$meがやってたのは厳密に言えば盗作じゃねえ",
                    "けどな、そこに$meっていうオリジナリティはどこにもない",
                    "そんなことは分かってたさ",
                    "だがそれでも小説を書き続けられる悦びを$meは享受できた",
                    "あの人にはほんと、感謝してる",
                    "でもその人のデビュー作が盗作だったと知った$meの気持ちは、どうにもならないんだ"),
            sana.talk("え？"),
            sana.think("今、$noseは何を言ったのだろう"),
            nose.talk("ある記者に、見せてもらったんだ",
                    "あの人が盗作したって人の原稿を",
                    "デビュー作『4masternovel1』にそっくりだったよ", "その上、あの人が書いた文章よりもずっと洗練された、素晴らしい作品だったんだよ！",
                    "それをあの人は盗み、自分だけ文壇にデビューした！",
                    "あの人は、いや、あいつは最初から悪魔だったんだ！",
                    "$meもこうなることを知っていて、それでも何も言わなかった！",
                    "$meはもう終わりなんだ！"),
            nose.do("$noseの手が、$CSの肩を押す"),
            nose.talk("なあ", "$meに小説を書かせてくれよ？", "あんた編集だろ？",
                    "あいつの代わりに$meの小説を出してくれ！",
                    "$meはまだ、作家として死にたくねえ！"),
            sana.talk("何、言ってるんですか？", "あの、落ち着いて"),
            nose.talk("それとも何か？",
                    "お前、あいつに惚れてんのか？", "だから$meの小説は担当できねえってのか！"),
            sana.do("そのまま$noseは$Sを押し倒し、馬乗りになる"),
            sana.talk("やめて、お願い……"),
            sana.do("$noseの顔が迫る"),
            sana.hear("その時、インタフォンが鳴らされた"),
            nira.talk("おーい"),
            sana.talk("$nirasakiさん！"),
            nose.talk("邪魔が入ったか"),
            nira.come("ドアを開けて入ってきたのは$Sだった"),
            nira.talk("あ、わりぃ。お邪魔だったか"),
            nose.do("$Sは手を離して立ち上がると、鼻を鳴らしてから玄関に向かう"),
            nira.talk("警察、呼ぼうか？"),
            nose.talk("$meは何もしてないさ。何もできるはずがねえ", "作家にできるのはな、小説を書くことくらいだろ？"),
            nose.go("二人に見せつけるようにして口を開き、一本抜けがある前歯を出すと、喉奥でクククと笑いを鳴らし、ここから出て行った"),
            nira.talk("大丈夫だったか？"),
            sana.talk("$nirasakiさん、どうして？"),
            nira.talk("いや、ちょっと別件で伝えておきたいことがあったんだが、偶然だ。何にしても良かった", "&"),
            nira.talk("一応警察には連絡してあるけど、最近物騒だからな"),
            sana.think("普段はあんなつっけんどんだけれど意外と自分の言ったことを覚えていてこうして気遣ってくれたことに、$Sは心の中で手を合わせて感謝した"),
            sana.talk("あ、それで伝えておきたいことって？"),
            nira.talk("近々週刊誌に盗作の話が出る。その作者は、お前の担当の先生だ。$notoだよ"),
            sana.talk("え！？"),
            stage=w.on_herhouse,
            )

def sc_checkmaster(w: World):
    sana, noto = W(w.sana), W(w.noto)
    nira = W(w.nirasaki)
    nose = W(w.nose)
    return w.scene("先生への確認",
            sana.be("翌日、先生に進捗確認にきている"),
            noto.be("テーブルに原稿を広げて書いている"),
            sana.talk("あの、原稿とは関係ないんですが"),
            noto.talk("何だい？"),
            sana.talk("実はある筋から、妙なことを耳に入れてしまって"),
            noto.talk("だから何だい？"),
            sana.talk("先生は盗作したことがありますか？"),
            noto.do("筆が止まる"),
            sana.talk("いえ。これだけ沢山作品が出ていれば、盗作だなんだと言ってくる人も沢山いるんですけど"),
            noto.talk("君は$meの担当編集だよね？", "$meのことを、信用できない？"),
            sana.talk("すみません。でも週刊誌に載ると聞いたので"),
            noto.talk("帰ってくれ。原稿が進められない"),
            sana.talk("すみません"),
            sana.do("立ち上がる"),
            noto.talk("全くブンヤというのはあれこれと嗅ぎ回っては、糞尿を掘り返す奴らなんだ"),
            _.talk("当時も散々言われた。今更何を言おうっていうんだ"),
            sana.think("珍しく苛立つ先生を見て、逆に不安になる"),
            sana.talk("また日を改めます。今日はつまらない話をしてしまい、申し訳ありませんでした"),
            noto.talk("全くだ。作品に没頭している時に余計なことを言わないでくれたまえ"),
            sana.go("おずおずと部屋を出ていく"),
            stage=w.on_hisapart_int,
            day=w.in_askplagiarism, time=w.at_afternoon,
            ).omit()

## episode
def ep_chapter3(w: World):
    return w.episode("3.第三章",
            ## NOTE
            sc_stalker(w),
            sc_intimidation(w),
            sc_manstalk(w),
            sc_checkmaster(w),
            )
